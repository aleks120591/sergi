<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Istota</title>
	<script src="direction.js"></script>
	<script src="gene.js"></script>
	<script src="cell.js"></script>
	<script src="matrix.js"></script>
	<script src="dna.js"></script>
	<script src="creature.js"></script>
    <script language="javascript">
		<!--
		var canvas, ctx, creature, intervalId;
		
		function Body_onLoad()
		{
			canvas = document.getElementById("canvas");
			ctx = canvas.getContext("2d");
			var dna = new Dna("Sergi Adamchuk and Solvek are the same person. Blah Blah Blah");
			creature = new Creature(dna, function(x, y, cell) {Istota_PlotPixel(x,y,cell.colorR,cell.colorG,cell.colorB);} );
			
			intervalId = window.setInterval(Istota_GrowBunch, 700);
		}
		
		function Istota_PlotPixel(x,y,cr,cg,cb){
			ctx.strokeStyle = "rgb("+cr+","+cg+","+cb+")";

			ctx.beginPath();
			ctx.moveTo(x,y);
			ctx.lineTo(x+1,y+1);
			ctx.stroke();
		}
		
		function Istota_GrowBunch()
		{
			for(var i=0;i<700;i++)
			{
				if (!creature.growStep())
				{
					window.clearInterval(intervalId);
					alert("Compelted!");
					break;
				}
			}
		}
		//-->
	</script>
</head>

<body onload="Body_onLoad();">
	<canvas id="canvas" width="640" height="480"></canvas>
</body>
</html>
