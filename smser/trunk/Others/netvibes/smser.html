<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:widget="http://www.netvibes.com/ns/">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Expires" content="" />
    <meta name="author" content="Sergi Adamchuk" />
	<meta name="description" content="Віджет для відправки СМС в Україні" />
	<meta name="apiVersion" content="1.0" />
	<meta name="inline" content="true" />
	<meta name="autoRefresh" content="1000000" />
	<meta name="debugMode" content="false" />
	<link rel="stylesheet" type="text/css" href="http://www.netvibes.com/themes/uwa/style.css" />
	<script type="text/javascript" src="http://www.netvibes.com/js/UWA/load.js.php?env=Standalone"></script>
	<script type="text/javascript" src="http://connect.co.ua/goodies/live/smser.js" charset="UTF-8"></script>
	<title>connect.co.ua</title>
	<link rel="icon" type="image/ico" href="http://connect.co.ua/images/favicon.ico"/>
	<widget:preferences>
	  <preference name="contacts" type="hidden" defaultValue=""/>
	  <preference name="gate" type="hidden" defaultValue="4"/>
	  <preference name="sender" type="hidden" defaultValue=""/>
	</widget:preferences>
	<script type="text/javascript">
		<!--
		var SAdamchuk_Smser_netvibes={};
		
		SAdamchuk_Smser_netvibes.isLibraryLoaded=(typeof(window['SAdamchuk_Smser_Controller'])!="undefined");

		SAdamchuk_Smser_netvibes.loadScript=function(){
			UWA.Data.getText(
				"http://connect.co.ua/goodies/live/smser.js",
				SAdamchuk_Smser_netvibes.initGadget
			  );
		};

		SAdamchuk_Smser_netvibes.initGadget=function(response){
			if(!SAdamchuk_Smser_netvibes.isLibraryLoaded){window.eval(response);}
			var env={resolveUrl:function(path){return "http://connect.co.ua/goodies/live/"+path;},Resize:function(){}};
		  	var d=widget.createElement("div");
		  	d.className="SAdamchuk_MSGadgets_SmserGadget";
	        var view=SAdamchuk_Smser_View(
	            d,env,
	            null,
	            "Для нормальної роботи в Internet Explorer вам потрібно <a href='http://connect.co.ua/content/view/18/28/#cookiesie' target='_blank'>дозволити кукі</a> для деяких сайтів.<br/>Для відправки повідомлень на Київстар через email шлюзи, абонентам потрібно <a href='http://www.kyivstar.net/faq/sms/' target='_blank'>активізувати послугу</a>.<br/>Якщо у вас виникли запитання чи труднощі, будь ласка перейдіть на сторінку <a href=\"http://connect.co.ua/faq\" target=\"_blank\">частих питань</a>.");
	        SAdamchuk_Smser_Controller.initialize(view,new SAdamchuk_Smser_Persister(),true);
	        widget.setBody(d);
		};
		
		SAdamchuk_Smser_netvibes.loadCss=function(){
			var headID = document.getElementsByTagName("head")[0];
			var cssNode = document.createElement('link');
			cssNode.type = 'text/css';
			cssNode.rel = 'stylesheet';
			cssNode.href = 'http://connect.co.ua/goodies/live/SmserGadget.css';
			cssNode.media = 'screen';
			headID.appendChild(cssNode);
		};
		
		widget.onLoad = function(){
			SAdamchuk_Smser_netvibes.loadCss();
			if(SAdamchuk_Smser_netvibes.isLibraryLoaded)
				SAdamchuk_Smser_netvibes.initGadget()
			else
				SAdamchuk_Smser_netvibes.loadScript();
		}
		
			function SAdamchuk_Smser_Persister(){}

			SAdamchuk_Smser_Persister.prototype.getContacts=function(){
			    return SAdamchuk_Smser_DeserializeContacts(widget.getValue("contacts"));
			}

			SAdamchuk_Smser_Persister.prototype.getSenderName=function(){
			    var res=widget.getValue("sender");
			    if(!res)return "";
			    return res;
			}

			SAdamchuk_Smser_Persister.prototype.getGateType=function(){
			    var res=widget.getValue("gate");
			    if(!res)return 0;
			    return res;
			}

			SAdamchuk_Smser_Persister.prototype.save=function(contacts,senderName){
			    widget.setValue("sender",senderName);
			    widget.setValue("contacts",SAdamchuk_Smser_SerializeContacts(contacts));
			}

			SAdamchuk_Smser_Persister.prototype.saveGateType=function(gateType){
				widget.setValue("gate",gateType);
			}
		// -->
	</script>
</head>
  <body>
  	<table width="100%"><tr><td align="center">
		<div id="smserGadgetHolder" class="SAdamchuk_MSGadgets_SmserGadget">
			Завантажується...
		</div>
	</td></tr></table>
  </body>
</html>